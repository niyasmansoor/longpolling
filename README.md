
LONG POLLING - WEBSOCKET SERVLET IMPLEMENTATION
 	
 About Application

	Its a long polling implementation using asynchronous servlet as the server which receives the long polling request from a client browser , an ejb DI based notifier and an event scheduler. On the client side , there is an html which makes the request through a jquery ajax call. Since this is an ejb based implementation , it works only in application servers (like TomEE, Jboss) and not web servers (like Tomcat)

Main Components Explained

LongPollingServlet : This is the server side async servlet which accepts asynchronous requests from client.

LongPollingEventScheduler : A threadsafe singleton notifier class which listens to the events generated by the event generator scheduler and notifies the servlet . It is registered with the servlet and maintains the async contexts which are client connections

LongPollingEventScheduler : This is the event generator scheduler . It is configured to schedule and fire events at 10 seconds intervals . (Intervals are configurable and can be altered). In this implementation , the scheduler generates a string messages with a counter specifying how many times the events are fired and at what timestamp it is fired. This can be seamlessy scaled to querying and fetching from the data source any new data for a particular client in real world scenario.
 
 Index.html : This is the client which makes HTTP requests using a jquery ajax call . Jquery api is in the /js.jquery.js file. Output displayed is like below

	“Message from longpolling server received 10 times at Thu May 26 08:05:20 GST 2016” 

Technology Stack used

Windows 10 64 bit
javaee 6 , JavaSE – 1.8.0_74 
Eclipse Mars.2 Release (4.5.2)
TomEE Application Server [ http://tomee.apache.org/apache-tomee.html ]

Steps to run the application

 -- Extract the longpolling.zip eclipse project into the workspace .

 -- Build the project

 -- Copy the generated longpolling.war in logpolling/target folder to <tomee_install_dir>/webapps. Please note that it wont run in Tomcat , but only in TomEE

 -- Start TomEE 

 -- Take firefox browser and enter the url : http://localhost:8080/longpolling/

 -- Page will be loaded and messages will be displayed every 10 secs without page refresh

Steps to Configure TomEE

 -- Extract apache-tomee-1.7.4-plume.zip to any folder (eg: C:\apache-tomee-plume-1.7.4)

 -- Set the JAVA_HOME env variable pointing to the java se installation (eg: C:\Program Files\Java\jdk1.8.0_74)

 -- Set the CATALINA_HOME env variable pointing to the TomEE installation (eg: C:\apache-tomee-plume-1.7.4)
